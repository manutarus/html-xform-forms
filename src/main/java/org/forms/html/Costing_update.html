<html>
<head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/muzima.js"></script>

    <title>Cost Assessment</title>
</head>
<body class="col-md-8 col-md-offset-2">
<div id="pre_populate_data"></div>
<form id="costing_form" name="costing_form">

<h2 class="text-center">COST ASSESSMENT</h2>

<div class="section">
    <h3>Demographics</h3>

    <div class="form-group">
        <input class="form-control" id="patient.uuid"
               name="patient.uuid" type="hidden" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.medical_record_number">AMRS ID Number:</label>
        <input class="form-control" id="patient.medical_record_number"
               name="patient.medical_record_number" type="text" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.family_name">Family Name:</label>
        <input class="form-control" id="patient.family_name" name="patient.family_name" type="text"
               readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.given_name">Given Name:</label>
        <input class="form-control" id="patient.given_name" name="patient.given_name" type="text"
               readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.middle_name">Middle Name:</label>
        <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text"
               readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.sex">Gender:</label>
        <select class="form-control" id="patient.sex" name="patient.sex" readonly="readonly">
            <option value="">...</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>
    </div>
    <div class="form-group">
        <label for="patient.birthdate">Date Of Birth:</label>
        <input class="form-control datepicker nonFutureDate" id="patient.birthdate" name="patient.birthdate" type="text"
               readonly="readonly">
    </div>
</div>

<div class="section">
    <h3>Survey Information</h3>

    <div class="form-group">
        <label for="obs.participant">Enter Participant ID:<span class="required">*</span></label>
        <input class="form-control" id="obs.participant"
               name="obs.systolic_blood_pressure" type="text"
               placeholder="Participant ID" data-concept="5325^PATIENT ID^99DCT"
               required="required">
    </div>

    <div class="form-group">
        <label for="patient.person_attribute15">Enter Household ID:<span class="required">*</span></label>
        <input class="form-control" id="patient.person_attribute15" name="patient.person_attribute15"
               type="text" placeholder="Household ID" required="required">
    </div>

    <div class="form-group">
        <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span></label>
        <input class="form-control datepicker nonFutureDate" id="encounter.encounter_datetime"
               name="encounter.encounter_datetime"  type="text"  readonly="readonly"
               required="required">
    </div>

    <div  class="form-group">
        <label>Division<span class="required">*</span></label>
        <select class="form-control optgroup select_bc" id="person_address.address4" name="person_address.address4" required="required" size=1>
            <option value="">---</option>
            <option value="2">Mosoriot</option>
            <option value="3">Turbo</option>
        </select>
    </div>

    <div class="form-group">
        <label>Community Unit<span class="required">*</span></label>
        <select class="form-control optgroup select_bc" id="encounter.location_id" name="encounter.location_id" required="required" size=1>
            <option value="0">---</option>
            <option value="2">Biribiriet</option>
            <option value="3">Chepkemel</option>
            <option value="4">Cheplaskei</option>
            <option value="5">Chepsaita</option>
            <option value="6">Chepteri</option>
            <option value="7">Itigo</option>
            <option value="8">Kokwet</option>
            <option value="9">Kingwal</option>
            <option value="10">Lelmokwo</option>
            <option value="11">Leseru</option>
            <option value="12">Mosoriot</option>
            <option value="13">Murgor hills</option>
            <option value="14">Murgusi</option>
            <option value="15">Ngechek</option>
            <option value="16">Ngenyilel</option>
            <option value="17">Osorongai</option>
            <option value="18">Sambu</option>
            <option value="19">Sigo</option>
            <option value="20">Sokyot</option>
            <option value="21">Sosian</option>
            <option value="22">Sugoi</option>
            <option value="23">Tuigoin</option>
            <option value="24">Sosian</option>
            <option value="25">Turbo/Kaptebee</option>
        </select>
    </div>

    <div class="form-group show_village">
        <label for="person_address.city_village">Village:<span class="required">*</span> </label>
        <input class="form-control" placeholder="village" id="person_address.city_village" name="patient.person_address.city_village" type="text" required="required">
    </div>
    <div class="form-group">
        <label for="encounter.provider_id">Provider ID:</label>
        <select class="form-control optgroup select_bc" id="encounter.provider_id" name="encounter.provider_id" required="required" size=1>
            <option value="">---</option>
            <option value="4-2">Jackson Rotich</option>
            <option value="3-4">Penina Kiptoo</option>
            <option value="2271-5">Kenedy Kirwa</option>
        </select>
    </div>
</div>

<div class="section">
    <h3>INPATIENT ADMISSIONS</h3>
    <div  class="form-group">
        <label>Have you at any time during the past 12 months been admitted in a hospital for at least one night?<span class="required">*</span></label>
        <select class="form-control optgroup select_bc" id="obs.admitted_select" name="obs.admitted_select"
                data-concept="9083^HOSPITALIZED IN THE PAST 12 MONTHS FOR AT LEAST ONE NIGHT^99DCT" required="required" required="required" size=1>
            <option value="">---</option>
            <option value="1065^YES^99DCT">Yes</option>
            <option value="1066^NO^99DCT">No</option>
            <option value="1504^PATIENT REFUSAL^99DCT">REFUSED</option>
            <option value="1067^UNKNOWN^99DCT">Don&#39;t Know</option>
        </select>
    </div>


    <div style="display:none" class="show_admission_quiz" id="obs.admission_details" data-concept="1901^OTHER MEDICATION ORDER^99DCT">
        <label for="obs.admission_in_past_12_months" id="obs.admission_in_past_12_months_label">Number of Admissions:<span class="required">*</span></label>
        <input class="form-control" id="obs.admission_in_past_12_months" name="obs.admission_in_past_12_months"
               type="number" placeholder="Number of Admissions" data-concept="5704^NUMBER OF HOSPITALIZATIONS IN PAST YEAR^99DCT" required="required">
        <p></p><input class="btn btn-primary" type="button" value="GO"/> <p></p>

    <label class="alert alert-info" id="obs.admission_container">For each of the admissions you listed, we are going to ask you some additional questions.</label>
    <div id="admission_container" ></div>
    </div>

    <div id="admissionModal" class="modalDialog">
        <div>
            <a href="#close" title="Close" class="close">close</a>

            <div class="form-group" id="obs.admission_injury">
                <label for="obs.admission_injury">Was the admission the result of an accident or injury?<span class="required">*</span></label>
                <fieldset name="obs.admission_cause_injury" data-concept="1901^OTHER MEDICATION ORDER^99DCT" id="obs.admission_injury_select">
                    <input id="obs.admission_cause_injury.yes" type="radio"  name="obs.injury" value="1065^YES^99DCT">
                    <label for="obs.admission_cause_injury.yes">Yes</label> &nbsp;&nbsp;&nbsp;&nbsp;
                    <input id="obs.admission_cause_injury.no" type="radio"  name="obs.injury" value="1066^NO^99DCT">
                    <label for="obs.admission_cause_injury.no">No</label><br>
                    <input id="obs.admission_cause_injury.dont_know" type="radio"  name="obs.injury" value="1624^DO NOT KNOW^99DCT">
                    <label for="obs.admission_cause_injury.dont_know">Don&#39;t Know</label>  &nbsp;&nbsp;&nbsp;&nbsp;
                    <input id="obs.admission_cause_injury.refused" type="radio"   name="obs.injury" value="1958^REFUSAL^99DCT">
                    <label for="obs.admission_cause_injury.refused">Refused</label>
                </fieldset>
            </div>

            http://jsfiddle.net/4SCp8/19/
            <div  style="display:none" class="form-group show_none_injury_quiz"  id="obs.admission_disease" data-concept="1901^OTHER MEDICATION ORDER^99DCT">
                <label>was the admission the result of any specific disease e.g malaria, typhoid, hypertension etc?<span class="required">*</span></label>
                <div class="form-group">
                    <fieldset  name="obs.admission_cause_disease" data-concept="1901^OTHER MEDICATION ORDER^99DCT" id="obs.admission_disease_select">
                        <input id="obs.admission_cause_disease.yes" type="radio"  name="obs.disease" value="1065^YES^99DCT">
                        <label for="obs.admission_cause_disease.yes">Yes</label> &nbsp;&nbsp;&nbsp;&nbsp;
                        <input id="obs.admission_cause_disease.no" type="radio"  name="obs.disease" value="1066^NO^99DCT">
                        <label for="obs.admission_cause_disease.no">No</label><br>
                        <input id="obs.admission_cause_disease.dont_know" type="radio"  name="obs.disease" value="1624^DO NOT KNOW^99DCT">
                        <label for="obs.admission_cause_disease.dont_know">Don&#39;t Know</label>  &nbsp;&nbsp;&nbsp;&nbsp;
                        <input id="obs.admission_cause_disease.refused" type="radio"   name="obs.disease" value="1958^REFUSAL^99DCT">
                        <label for="obs.admission_cause_disease.refused">Refused</label>
                    </fieldset>
                </div>
                <div style="display:none" class="form-group ask_specify_disease" id="obs.specific_disease_div">
                    <label for="obs.specific_disease" id="obs.specific_disease_label">What was/were the reason(s)/disease(s)<span class="required">*</span></label>
                    <div class="section repeat">
                        <input class="form-control" id="obs.specific_disease" name="obs.admission_in_past_12_months"
                               type="text" placeholder="Reason(s)/disease(s)" data-concept="conceptID^Name^99DCT" required="required">
                    </div>
                </div>
            </div>
            <div class="section">
                <label>Did you pay for this admission using any of the following sources?<span class="required">*</span></label>
                <div class="form-group" id="obs.payment_source">
                    <fieldset data-concept="1069^payment sources^99DCT" name="1069^payment sources^99DCT">

                        <input id="obs.payment_source.NHIF" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^NHIF^99DCT">
                        <label for="obs.payment_source.NHIF">NHIF</label><br>

                        <input id="obs.payment_source.private_medical_insurance" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^INSURANCE^99DCT">
                        <label for="obs.payment_source.private_medical_insurance">Private Medical Insurance</label><br>

                        <input id="obs.payment_source.pocket" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^POCKET^99DCT">
                        <label for="obs.payment_source.pocket">Out of pocket</label><br>

                        <input id="obs.payment_source.chama_loan" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^CHAMA_LOAN^99DCT">
                        <label for="obs.payment_source.chama_loan">Loaning from Chama</label><br>

                        <input id="obs.payment_source.waiver" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^Waiver^99DCT">
                        <label for="obs.payment_source.waiver">Waiver</label><br>

                        <input id="obs.payment_source.donations" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^DONATIONS^99DCT">
                        <label for="obs.payment_source.donations">Donations</label><br>

                        <input id="obs.payment_source.others" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="590^OTHERS^99DCT">
                        <label for="obs.payment_source.others">Others</label><br>
                        <div style="display:none" class="section" id="obs.payment_source.others_text_div">
                            <div class="repeat">
                                <input class="form-control" id="obs.payment_source.others_text" name="obs.admission_in_past_12_months"
                                       type="text" placeholder="payment source others" data-concept="conceptID^Name^99DCT" required="required">
                            </div>
                        </div>
                        <input id="obs.payment_source.dont_know" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="1624^DO NOT KNOW^99DCT">
                        <label for="obs.payment_source.dont_know">Don&#39;t Know</label><br>

                        <input id="obs.payment_source.refused" type="checkbox"
                               name="1069^payment sources^99DCT"
                               value="1958^REFUSAL^99DCT">
                        <label for="obs.payment_source.refused">Refused</label><br>

                    </fieldset>
                </div>
            </div>

            <div class="form-group">
                <label for="encounter.provider_id">How much was the total bill for the admission?<span class="required">*</span></label>
                <input class="form-control checkDigit" id="obs.total_bill" name="obs.total_bill"
                       type="text" required="required">
            </div>

            <div class="form-group">
                <label for="encounter.provider_id">How much did you pay using your own money including money from loans that you will need to pay back?<span class="required">*</span></label>
                <input class="form-control checkDigit" id="obs.bill_paid_own_money" name="obs.total_bill"
                       type="text" required="required">
            </div>
        </div>

        <div class="form-group" id="obs.means_of_transport">
            <label for="obs.means_of_transport">What means of transport did you use to get to the hospital? <span class="required">*</span></label>
            <fieldset name="obs.means_of_transport" data-concept="1901^OTHER MEDICATION ORDER^99DCT" id="obs.means_of_transport_select">
                <input id="obs.means_of_transport.yes" type="radio"  name="obs.means_of_transport_select" value="1065^YES^99DCT">
                <label for="obs.means_of_transport.yes">On foot</label> &nbsp;&nbsp;&nbsp;&nbsp;
                <input id="obs.means_of_transport.no" type="radio"  name="obs.means_of_transport_select" value="1066^NO^99DCT">
                <label for="obs.means_of_transport.no">Boda Boda</label><br>
                <input id="obs.means_of_transport.matatu" type="radio"   name="obs.means_of_transport_select" value="1958^REFUSAL^99DCT">
                <label for="obs.means_of_transport.matatu">Matatu</label>  &nbsp;&nbsp;&nbsp;&nbsp;
                <input id="obs.means_of_transport.refused" type="radio"  name="obs.means_of_transport_select" value="1958^REFUSAL^99DCTx">
                <label for="obs.means_of_transport.refused">Refused</label><br>
            </fieldset>
        </div>

        <div class="form-group">
            <label for="obs.time_to_hospital">How much time did it take to reach the hospital?<span class="required">*</span></label>
            <fieldset class="section" name="obs.time_to_hospital" data-concept="1901^OTHER MEDICATION ORDER^99DCT" id="obs.time_to_hospital">
                <br><label>Hours</label>
                <select id="obs.time_to_hospital_hours" name="select" class="main-form">
                    <option value="">Hours</option>
                </select>
                <label>Minutes</label>
                <select id="obs.time_to_hospital_mins" name="select" class="main-form">
                    <option value="">Mins</option>
                </select> <br>
                <input id="obs.time_to_hospital.dont_know" type="radio"   name="obs.time_to_hospital_select" value="1624^DO NOT KNOW^99DCT">
                <label for="obs.time_to_hospital.dont_know">Don&#39;t Know</label>  &nbsp;&nbsp;&nbsp;&nbsp;
                <input id="obs.time_to_hospital.refused" type="radio"  name="obs.time_to_hospital_select" value="1958^REFUSAL^99DCT">
                <label for="obs.time_to_hospital.refused">Refused</label><br>
            </fieldset>
        </div>
        <div class="form-group">
            <label for="obs.time_to_hospital">How much was the transport cost?<span class="required">*</span></label>
            <fieldset class="section" name="obs.time_to_hospital" data-concept="1901^OTHER MEDICATION ORDER^99DCT" id="obs.cost_of_transport_options">
                <input class="form-control" id="obs.cost_of_transport" name="obs.cost_of_transport_options"
                       type="number" placeholder="Cost to hospital" data-concept="conceptID^Name^99DCT" required="required">
                <input id="obs.cost_of_transport.dont_know" type="radio"   name="obs.cost_of_transport_options" value="1624^DO NOT KNOW^99DCT">
                <label for="obs.cost_of_transport.dont_know">Don&#39;t Know</label>  &nbsp;&nbsp;&nbsp;&nbsp;
                <input id="obs.cost_of_transport.refused" type="radio"  name="obs.cost_of_transport_options" value="1958^REFUSAL^99DCT">
                <label for="obs.cost_of_transport.refused">Refused</label><br>
            </fieldset>
        </div>
    </div>



</div>

<div class="form-group text-center">
    <input class="btn btn-primary" id="save_draft" type="button" value="Save"/>
    <input class="btn btn-primary" id="submit_form" type="button" value="Submit"/>
</div>

</form>

</body>

<style type="text/css">
    input[type="checkbox"]:checked+label{background:#ccc; color:white}​
    .hide {
        display: none;
    }
    .dialog{
        width:300px !important;
    }
    .select_bc {
        background:rgba(71, 42, 22, 0.8);
        color:#fff;
        text-shadow:0 1px 0 rgba(0,0,0,0.4);
    }
    .optgroup { font-size:25px;
        background:rgba(71, 42, 22, 0.8);
    }
    .modalDialog {
        position: fixed;
        font-family: Arial, Helvetica, sans-serif;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: rgba(0,0,0,0.8);
        z-index: 99999;
        opacity:0;
        -webkit-transition: opacity 400ms ease-in;
        -moz-transition: opacity 400ms ease-in;
        transition: opacity 400ms ease-in;
        pointer-events: none;
    }
    .modalDialog:target {
        opacity:1;
        pointer-events: auto;
    }
    .modalDialog > div {
        width: 90%;
        height: 90%;
        position: relative;
        margin: 3% auto;
        padding: 5px 20px 13px 20px;
        border-radius: 10px;
        background: #fff;
        background: -moz-linear-gradient(#fff, #999);
        background: -webkit-linear-gradient(#fff);
        background: -o-linear-gradient(#fff, #999);
    }
    .close {
        background: #606061;
        color: #FFFFFF;
        line-height: 70px;
        position: absolute;
        right: 12px;
        text-align: center;
        top: 10px;
        width: 70px;
        text-decoration: none;
        font-weight: bold;
        -webkit-border-radius: 12px;
        -moz-border-radius: 12px;
        border-radius: 12px;
        -moz-box-shadow: 1px 1px 3px #000;
        -webkit-box-shadow: 1px 1px 3px #000;
        box-shadow: 1px 1px 3px #000;
    }
    .close:hover { background: #00d9ff; }
</style>

<script type="text/javascript">
$(document).ready(function () {

    $('#save_draft').click(function () {
        document.saveDraft();
    });

    $('#submit_form').click(function(){
        document.submit();
    });

    $('#costing_form').validate({
        rules: {
            pulse: {
                number: true,
                range: [0, 230]
            },
            temperature_c: {
                number: true,
                range: [25, 43]
            },
            weight_kg: {
                number: true,
                range: [0, 250]
            },
            height_cm: {
                number: true,
                range: [10, 228]
            },
            glycosylated_hemoglobin: {
                number: true,
                range: [0, 20]
            }
        },
        submitHandler: function (form) {
            $('#result').html(JSON.stringify($('form').serializeEncounterForm(),undefined,2));
        }
    });

    $("#obs\\.admission_in_past_12_months").focusout(function(){
        document.getElementById('admission_container').innerHTML = "" ;
        tblHtml = '<table>'
        for (i=1; i<= $('#obs\\.admission_in_past_12_months').val(); i +=1 ) {
            tblHtml += '<tr>';
            tblHtml += '<td><a href="#admissionModal"><strong>Admission '+i+'</strong></a></td>';
            tblHtml += '</tr>';
        }
        tblHtml += '</table>';
        document.getElementById('admission_container').innerHTML = tblHtml;
    });





    $('#obs\\.admitted_select').change(function () {
        var $show_admission_quiz = $('.show_admission_quiz ');
        if ($('#obs\\.admitted_select').val() == '1065^YES^99DCT') {
            $show_admission_quiz.show();
        }
        else
            $show_admission_quiz.hide();
    });


});

</script>
</html>