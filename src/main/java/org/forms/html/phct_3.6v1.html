<html>
<head>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/muzima.js"></script>

    <title>PHCT Household Encounter Form</title>
</head>
<body class="col-md-8 col-md-offset-2">
<div id="pre_populate_data"></div>
<form id="dispensary_form" name="dispensary_form">

    <h2 class="text-center">PHCT Household Encounter Form</h2>


    <div class="section">

        <div class="form-group">
            <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span></label>
            <input class="form-control datepicker nonFutureDate" id="encounter.encounter_datetime"
                   name="encounter.encounter_datetime"  type="text"  readonly="readonly"
                   required="required">
        </div>
        <h3>Household Information</h3>


        <div class="form-group">
            <label for="patient.household_household_id">Household id:<span class="required">*</span></label>
            <input class="form-control" id="patient.household_household_id" type="text" required="required" placeholder="House hold Id">
        </div>

        <div class="form-group show_provider_id_text">
            <label for="encounter.provider_id">Provider Id:<span class="required">*</span></label>
            <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id"
                   type="text" required="required">
        </div>




        <div class="form-group">
            <label for="encounter.location_id">Ampath site/satellite clinic location:<span class="required">*</span></label>
            <input class="form-control" id="encounter.location_id" type="text" placeholder="Start typing location...">
            <input class="form-control" name="encounter.location_id" type="hidden">
        </div>


        <div class="form-group">
            <label for="Patient_address.county_district">District:<span class="required">*</span></label>
            <select class="form-control" id="Patient_address.county_district" name="Patient_address.county_district" readonly="readonly">
                <option value="">...</option>
            </select>
        </div>

        <div class="form-group">
            <label for="Patient_address.township_division">Division:<span class="required">*</span></label>
            <select class="form-control" id="Patient_address.township_division" name="Patient_address.township_division" readonly="readonly">
                <option value="">...</option>
            </select>
        </div>

        <div class="form-group">
            <label for="household_location_id">Location:<span class="required">*</span></label>
            <select class="form-control" id="household_location_id" name="household_location_id" readonly="readonly">
                <option value="">...</option>
            </select>
        </div>
       <div class="form-group">
            <label for="Person_address.address2">Sub location:<span class="required">*</span></label>
            <select class="form-control" id="Person_address.address2" name="Person_address.address2" readonly="readonly">
                <option value="">...</option>
            </select>
        </div>
        <div class="form-group">
            <label for="Person_address.city_village">Villages:<span class="required">*</span></label>
            <select class="form-control" id="Person_address.city_village" name="Person_address.city_village" readonly="readonly">
                <option value="">...</option>
            </select>
        </div>

    </div>
    <div class="section">

        <div class="form-group">
            <label for="allowed_in">Allowed in?</label>
            <select class="form-control" id="allowed_in" name="allowed_in">
                <option value="">...</option>
                <option value="A">Accepted</option>
                <option value="D">Declined</option>
                <option value="NH">Not home</option>
                <option value="RLD">Requested later date</option>
            </select>
        </div>

  <div class="section">
      <label class="alert alert-info" id ="chw_alert" >If household Declines then get CHW information</label>

      <div class="form-group">

            <label for="members_over_13">No of members &gt;= 13 years:<span class="required">*</span></label>
            <input class="form-control" id="members_over_13"
                   name="members_over_13"
                   type="number" data-concept="7630^NUMBER OF HOUSEHOLD MEMBERS 13 AND OLDER^99DCT" required="required">
        </div>

        <div class="form-group">

            <label for="children_less_13">No of children &lt; 13 years:<span class="required">*</span></label>
            <input class="form-control" id="children_less_13"
                   name="children_less_13"
                   type="number" data-concept="7631^NUMBER OF HOUSEHOLD MEMBERS LESS THAN 13^99DCT" required="required">
        </div>


        <div class="form-group">
            <label for="total-number-of-house-hold-members">Total number of house hold members eligible for testing<span class="required">*</span></label>
            <input class="form-control" id="total-number-of-house-hold-members"
                   name="total-number-of-house-hold-members" type="NUMBER"
                   type="number" data-concept="6801^NUMBER OF HOUSEHOLD MEMBERS^99DCT" required="required">
        </div>
  </div>
        </div>


    <!--General accepted div-->


<div style="display:none" id="general_accepted_div" class="allowed_in">
    <div class="section">
        <h3>Household member definition</h3>

        <div class="form-group">
            <label for="no_of_bed_net"> Number of nets<span class="required">*</span></label>
            <input class="form-control isDecimal" id="no_of_bed_net" required="required"
                   name="no_of_bed_net" type="number"
                   data-concept="6866^NUMBER OF BEDNETS IN HOUSEHOLD^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided"> Number of nets provided<span class="required">*</span></label>
            <input class="form-control isDecimal" id="number-of-nets-provided" required="required"
                   name="number-of-nets-provided" type="number"
                   data-concept="7629^NUMBER OF BEDNETS ISSUED PER HOUSEHOLD^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Voucher ID of net provided<span class="required">*</span></label>
            <input class="form-control isDecimal" id="voucher-id-net-provided" required="required"
                   name="voucher-id-net-provided" type="number"
                   data-concept="7633^VOUCHER ID FOR BEDNET^99DCT">
        </div>
        </div>

    <div class="section">
        <h3>Socio economic questions</h3>

        <div class="form-group">
            <label for="number-of-nets-provided">Total land owned<span class="required">*</span></label>
            <input class="form-control isDecimal" id="total-land-owned" required="required"
                   name="total-land-owned" type="number"
                   data-concept="6304^TOTAL LAND HOUSEHOLD CURRENTLY OWN^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Number of cows owned<span class="required">*</span></label>
            <input class="form-control isDecimal" id="total_number_of_cattle_household_currently_own" required="required"
                   name="total_number_of_cattle_household_currently_own" type="number"
                   data-concept="6305^TOTAL NUMBER OF CATTLE HOUSEHOLD CURRENTLY OWN^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Number of goats owned?:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="total_number_of_goats_household_currently_own" required="required"
                   name="total_number_of_goats_household_currently_own" type="number"
                   data-concept="6306^TOTAL NUMBER OF GOATS HOUSEHOLD CURRENTLY OWN^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Number of sheep owned?:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="total_number_of_sheep_household_currently_own" required="required"
                   name="total_number_of_sheep_household_currently_own" type="number"
                   data-concept="6307^TOTAL NUMBER OF SHEEP HOUSEHOLD CURRENTLY OWN^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Children between 3-20 yrs on household?:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="total_children_age_between_3_and_20_living_in_home" required="required"
                   name="total_children_age_between_3_and_20_living_in_home" type="number"
                   data-concept="6302^TOTAL CHILDREN AGE BETWEEN 3 AND 20 LIVING IN HOME^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided">Number attending school or educational institution?:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="number_of_household_members_currently_attending_school" required="required"
                   name="number_of_household_members_currently_attending_school" type="number"
                   data-concept="7233^NUMBER OF HOUSEHOLD MEMBERS CURRENTLY ATTENDING SCHOOL^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided"># of members &gt;=13 years?:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="number_of_household_members_13_and_older_eligible_for_hiv_test" required="required"
                   name="number_of_household_members_13_and_older_eligible_for_hiv_test" type="number"
                   data-concept="7634^NUMBER OF HOUSEHOLD MEMBERS 13 AND OLDER ELIGIBLE FOR HIV TEST^99DCT">
        </div>

        <div class="form-group">
            <label for="number-of-nets-provided"># of children &lt; 13 years:<span class="required">*</span></label>
            <input class="form-control isDecimal" id="number_of_household_members_less_than_13_eligible_for_hiv_test" required="required"
                   name="number_of_household_members_less_than_13_eligible_for_hiv_test" type="number"
                   data-concept="7635^NUMBER OF HOUSEHOLD MEMBERS LESS THAN 13 ELIGIBLE FOR HIV TEST^99DCT">
        </div>
    </div>

    <div class="section">
        <h3>Individual Household Member</h3>

        <div class="form-group">
            <input class="form-control" id="patient.uuid"
                   name="patient.uuid" type="hidden">
        </div>
        <div class="form-group">
            <label for="patient.medical_record_number">AMRS ID Number:</label>
            <input class="form-control" id="patient.medical_record_number"
                   name="patient.medical_record_number" type="text">
        </div>
        <div class="form-group">
            <label for="patient.family_name">Family Name:</label>
            <input class="form-control" id="patient.family_name" name="patient.family_name" type="text"
                    >
        </div>
        <div class="form-group">
            <label for="patient.given_name">Given Name:</label>
            <input class="form-control" id="patient.given_name" name="patient.given_name" type="text"
                    >
        </div>
        <div class="form-group">
            <label for="patient.middle_name">Middle Name:</label>
            <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text"
                    >
        </div>
        <div class="form-group">
            <label for="patient.sex">Gender:</label>
            <select class="form-control" id="patient.sex" name="patient.sex">
                <option value="">...</option>
                <option value="M">Male</option>
                <option value="F">Female</option>
            </select>
        </div>
        <div class="form-group">
            <label for="patient.birthdate">Date Of Birth:</label>
            <input class="form-control datepicker nonFutureDate" id="patient.birthdate" name="patient.birthdate" type="text"
                    >
        </div>

        <div class="form-group">
            <label for="patient.phone">Phone:</label>
            <input class="form-control phoneNumber" id="patient.phone1" name="patient.phone1" type="tel">
        </div>

        <div class="form-group">
            <label for="patient.phone">Re-Enter Phone Number:</label>
            <input class="form-control phoneNumber" id="patient.phone" name="patient.phone" type="tel">
        </div>


        <div class="form-group">
            <label for="civil_status">Marital status:<span
                    class="required">*</span></label>
            <select class="form-control" id="civil_status" required="required"
                    name="civil_status" data-concept="1054^CIVIL STATUS^99DCT">
                <option value="">...</option>
                <option value="1057^NEVER MARRIED^99DCT">Single</option>
                <option value="1058^DIVORCED^99DCT">Divorced</option>
                <option value="1056^SEPARATED^99DCT">Separated</option>
                <option value="1059^WIDOWED^99DCT">Widowed</option>
                <option value="5555^MARRIED^99DCT">Married</option>
                <option value="1060^LIVING WITH PARTNER^99DCT">Cohabiting</option>



            </select>
        </div>


        <div class="form-group">
            <label for="regular_sexual_partner">Do you have a regular partner?<span
                    class="required">*</span></label>
            <select class="form-control" id="regular_sexual_partner" required="required"
                    name="regular_sexual_partner" data-concept="7000^REGULAR SEXUAL PARTNER^99DCT">
                <option value="">...</option>
                <option value="1065^YES^99DCT">Yes</option>
                <option value="1066^NO^99DCT">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="regular_sexual_partner">Do you know the status of your partner?<span
                    class="required">*</span></label>
            <select class="form-control" id="partner_known_hiv_status" required="required"
                    name="partner_known_hiv_status" data-concept="7001^PARTNER KNOWN HIV STATUS^99DCT">
                <option value="">...</option>
                <option value="1065^YES^99DCT">Yes</option>
                <option value="1066^NO^99DCT">No</option>
            </select>
        </div>


        <div class="form-group">
            <label for="regular_sexual_partner">Condom use?<span
                    class="required">*</span></label>
            <select class="form-control" id="condom_use" required="required"
                    name="condom_use" data-concept="1848^CONDOM USE^99DCT">
                <option value="">...</option>
                <option value="1065^YES^99DCT">Yes</option>
                <option value="1066^NO^99DCT">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="regular_sexual_partner">House status?<span
                    class="required">*</span></label>
            <select class="form-control" id="house_status" required="required"
                    name="house_status" data-concept="6144^HOUSE STATUS^99DCT">
                <option value="">...</option>
                <option value="6141^HOUSEHOLD RESIDENT^99DCT">Household resident</option>
                <option value="6142^VISITOR FROM CATCHMENT AREA^99DCT">Visitor from catchment area </option>
                <option value="6143^VISITOR NOT FROM CATCHMENT AREA^99DCT">Visitor from elsewhere</option>
            </select>
        </div>


        <div class="form-group">
            <label for="patient.phone">Relationship to Head of Household:</label>
            <select class="form-control" id="person_relationship" required="required"
                    name="house_status">
            <option value="1">Self (Household Head)</option>
            <option value="2">Spouse</option>
            <option value="3">Son/Daughter-in-law</option>
            <option value="4">Son/Daughter-in-law</option>
            <option value="5">Parent in-law</option>
            <option value="6">Parent in-law</option>
            <option value="7">Grandchild</option>
            <option value="8">Grandparent</option>
            <option value="9">Brother/Sister</option>
            <option value="10">Uncle/Aunt</option>
            <option value="11">Co-wife</option>
            <option value="12">Cousin</option>
            <option value="13">Niece/Nephew</option>
            <option value="14">Step child</option>
            <option value="15">Foster child</option>
            <option value="16">Friend</option>
            <option value="17">House helper</option>
            <option value="18">Employee helper</option>
            <option value="19">Tenant/Renter</option>
            <option value="20">Other</option>
            <option value="99">Don’t Know</option>
                </select>
        </div>
    </div>


    <div class="section">
     <h3>Part 2: Socio economic questions</h3>

        <div class="form-group">
            <label for="civil_status">Average income per month:<span
                    class="required">*</span></label>
            <select class="form-control" id="individual_average_income_per_month" required="required"
                    name="individual_average_income_per_month" data-concept="7003^INDIVIDUAL AVERAGE INCOME PER MONTH (KSH)^99DCT">
                <option value="">...</option>
                <option value="7002^LESS THAN 1000 KSH^99DCT">0-1000</option>
                <option value="6313^1001 to 2000 KSH^99DCT">1001-2000</option>
                <option value="6314^2001 to 3000 KSH^99DCT">2001-3000</option>
                <option value="6315^3001 to 5000 KSH^99DC">3001-5000</option>
                <option value="6316^5001 to 10000 KSH^99DCT">5001-10000</option>
                <option value="6317^MORE THAN 10000 KSH^99DCT">Above 10000</option>



            </select>
        </div>

        <div class="form-group">
                    <label for="civil_status">Education level :<span
                            class="required">*</span></label>
                    <select class="form-control" id="highest_education" required="required"
                            name="highest_education" data-concept="1605^HIGHEST EDUCATION^99DCT">
                        <option value="">...</option>
                        <option value="1107^NONE^99DCT">None </option>
                        <option value="7583^ADULT EDUCATION^99DCT">Adult Education</option>
                        <option value="T6214^PRIMARY SCHOOL^99DCT"> Primary  </option>
                        <option value="6215^SECONDARY SCHOOL^99DCT">Secondary </option>
                        <option value="6216^COLLEGE^99DCT">Tertiary </option>
                        <option value="1604^UNIVERSITY^99DCT">University </option>
                    </select>
                </div>
            <div class="form-group">

                <label for="members_over_13">Hours worked in past week on farm, for wage or business:<span class="required">*</span></label>
                <input class="form-control" id="number_of_hours_income_generated_activities_in_past_week"
                       name="number_of_hours_income_generated_activities_in_past_week"
                       type="number" data-concept="6145^NUMBER OF HOURS INCOME GENERATED ACTIVITIES IN PAST WEEK^99DCT" required="required">
            </div>


        <div class="form-group">
                <label for="members_over_13">Hours worked in housework-cooking, cleaning?<span class="required">*</span></label>
                <input class="form-control" id="number_of_hours_non_income_generated_activities_in_past_week"
                       name="number_of_hours_non_income_generated_activities_in_past_week"
                       type="number" data-concept="6146^NUMBER OF HOURS NON-INCOME GENERATED ACTIVITIES IN PAST WEEK^99DCT" required="required">
        </div>

        <div class="form-group">
                <label for="members_over_13">Times gone to health facility due to health problem in past 4wks?<span class="required">*</span></label>
                <input class="form-control" id="number_of_times_to_health_facility_due_to_health_issues_in_past_four_week"
                       name="number_of_times_to_health_facility_due_to_health_issues_in_past_four_week"
                       type="number" data-concept="6147^NUMBER OF TIMES TO HEALTH FACILITY DUE TO HEALTH ISSUES IN PAST FOUR WEEKS^99DCT" required="required">
        </div>
        <div class="form-group">
                <label for="members_over_13">Amount of money used on medical care with your illness in past 4wks?<span class="required">*</span></label>
                <input class="form-control" id="spent_on_medical_issues_in_past_four_weeks"
                       name="spent_on_medical_issues_in_past_four_weeks"
                       type="number" data-concept="6148^MONEY (KSH) SPENT ON MEDICAL ISSUES IN PAST FOUR WEEKS^99DCT" required="required">
        </div>



    </div>


    <div class="section">
        <h3>Part 3: For Children</h3>

        <div class="form-group">
            <label for="immunizations_ever">Child immunized?<span
                    class="required">*</span></label>
            <select class="form-control" id="immunizations_ever" required="required"
                    name="immunizations_ever" data-concept="5853^IMMUNIZATIONS EVER^99DCT">
                <option value="">...</option>
                <option value="1065^YES^99DCT">Yes</option>
                <option value="1066^NO^99DCT">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="source_of_immunization_information">Source of immunization information:<span
                    class="required">*</span></label>
            <select class="form-control" id="source_of_immunization_information" required="required"
                    name="source_of_immunization_information" data-concept="6163^SOURCE OF IMMUNIZATION INFORMATION^99DCT">
                <option value="">...</option>
                <option value="6162^DOCUMENTATION^99DCT">Documentation</option>
                <option value="1410^CARETAKER^99DCT">Caretaker</option>
            </select>
        </div>

        <div class="form-group">
            <label for="immunizations_ever">Previously immunization:<span
                    class="required">*</span></label>
            <select class="form-control" id="previous_immunizations_administered" required="required"
                    name="previous_immunizations_administered" data-concept="1198^PREVIOUS IMMUNIZATIONS ADMINISTERED^99DCT">
                <option value="">...</option>
                <option value="886^BACILLE CAMILE-GUERIN VACCINATION^99DCT">BCG</option>
                <option value="783^POLIO VACCINATION^99DCT">Polio</option>
                <option value="6654^PENTAVALENT VACCINE^99DCT">DPT/ Pentavalent</option>
                <option value="36^MEASLES VACCINATION^99DCT">Measles</option>
            </select>
        </div>

        <div class="form-group">
            <label for="review_of_systems_general">With fever?:<span
                    class="required">*</span></label>
            <select class="form-control" id="review_of_systems_general" required="required"
                    name="review_of_systems_general" data-concept="1069^REVIEW OF SYSTEMS, GENERAL^99DCT">
                <option value="">...</option>
                <option value="5945^FEVER^99DCT">Yes</option>
                <option value="664^NEGATIVE^99DCT">No</option>
            </select>
        </div>


     <div class="form-group">
            <label for="malaria_tests_ordered">If yes, malaria test done?:<span
                    class="required">*</span></label>
            <select class="form-control" id="malaria_tests_ordered" required="required"
                    name="malaria_tests_ordered" data-concept="1271^TESTS ORDERED^99DCT">
                <option value="">...</option>
                <option value="32^MALARIAL SMEAR^99DCT">Yes</option>
                <option value="1107^NONE^99DCT">No</option>
            </select>
        </div>

        <div class="form-group">
            <label for="malarial_smear">Test result?:<span
                    class="required">*</span></label>
            <select class="form-control" id="malarial_smear" required="required"
                    name="malarial_smear" data-concept="32^MALARIAL SMEAR^99DCT">
                <option value="">...</option>
                <option value="703^POSITIVE^99DCT">Positive</option>
                <option value="664^NEGATIVE^99DCT">Negative</option>
            </select>
        </div>



    </div>

        <div class="form-group">
            <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid"
                   type="hidden" required="required">
 </div>

</div>
    </form>
</body>

<script type="text/javascript">
    $(document).ready(function () {

        $('#save_draft').click(function () {
            document.saveDraft();
        });

        $('#submit_form').click(function(){
            document.submit();
        });

        $('#phct_encounter_form').validate({
            rules: {
                pulse: {
                    number: true,
                    range: [0, 230]
                },
                temperature_c: {
                    number: true,
                    range: [25, 43]
                },
                weight_kg: {
                    number: true,
                    range: [0, 250]
                },
                height_cm: {
                    number: true,
                    range: [10, 228]
                },
                glycosylated_hemoglobin: {
                    number: true,
                    range: [0, 20]
                }
            },
            submitHandler: function (form) {
                $('#result').html(JSON.stringify($('form').serializeEncounterForm(),undefined,2));
            }
        });
    var fullDate = new Date()
    var twoDigitMonth = ((fullDate.getMonth().length+1) === 1)? (fullDate.getMonth()+1) : '0' + (fullDate.getMonth()+1);
    var currentDate = fullDate.getFullYear() + "-" + twoDigitMonth + "-" + fullDate.getDate();
    $("#encounter\\.encounter_datetime").val(currentDate);

    navigator.geolocation.getCurrentPosition (function (pos)
    {
        var lat = pos.coords.latitude;
        var lng = pos.coords.longitude;
        $("#lat").text (lat);
        $("#lng").text (lng);
    });


    var dispensaryName = [
        {"val": "5", "label": "Amukura"},
        {"val": "55", "label": "Bumala A"},
        {"val": "83", "label": "Bumala B"},
        {"val": "4", "label": "Burnt Forest"},
        {"val": "19", "label": "Busia"},
        {"val": "7", "label": "Chulaimbo"},
        {"val": "17", "label": "Iten"},
        {"val": "18", "label": "Kabarnet"},
        {"val": "23", "label": "Khuyangu"},
        {"val": "11", "label": "Kitale"},
        {"val": "68", "label": "MARIGAT"},
        {"val": "59", "label": "MAUTUMA"},
        {"val": "77", "label": "Moiben"},
        {"val": "2", "label": "Mosoriot"},
        {"val": "9", "label": "Mt. Elgon"},
        {"val": "6", "label": "Naitiri"},
        {"val": "79", "label": "Nambale"},
        {"val": "21", "label": "Non-AMPATH Site"},
        {"val": "22", "label": "None"},
        {"val": "20", "label": "Port Victoria"},
        {"val": "73", "label": "Soy"},
        {"val": "12", "label": "Teso"},
        {"val": "3", "label": "Turbo"},
        {"val": "16", "label": "Unknown"},
        {"val": "8", "label": "Webuye"},
        {"val": "28", "label": "Ziwa"}
    ];

    $('#encounter\\.location_id').autocomplete({
        source: dispensaryName,
        create: function(event,ui){
            var location_val = $('input[name="encounter\\.location_id"]').val();
            $.each(dispensaryName, function (i, elem) {
                if (elem.val == location_val) {
                    $('#encounter\\.location_id').val(elem.label)
                }
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.location_id"]').val(ui.item.val  );
            $('#encounter\\.location_id').val(ui.item.label);
            return false;
        }
    });





     var butulas={
         "Butula":{"Butula2":
                    {"Marachi East":{
                        "Elukongo":["Buyaiyi","Chengo A","Chengo B","Siribo A","Siribo B","Mauko A","Mauko B","Namaterema","Makwara","Malomba A","Malomba B","Emafubu","Makhubabi","Buhuyu","Buhuyi Town","Sirandala"],
                         "Tingolo":["Siunga A","Siunga B","Mungabo","Namaika","Munyenya","Simakola","Esigulu","Khurana","Kalalani","Esibina A","Esibina B","Eluche A","Eluche B","Mulwanda","Tingolo","Buloma","Lukhakha A","Lukhakha B","Lukhakha C","Masendebale A","Masendebale B"],
                        "BUMALA (B)":["Enango A","Enango B","Bumala A","Bumala B","Bumala C","Buduma A","Buduma B","Buduma C","Kongolo","Apala","Isongo A","Isongo B","Iseka","Emwaku","Musibiriri","Enango A","Enango B","Bumala A","Bumala B","Bumala C","Buduma A"]},


            "Bumala A":{
        "BUSIRE":["Bumala","Busire","Sigulu","Sitoto","Mukwayo","Mayoni"],
                "Bukhala":["Ibanda","Bukhale","Musire","Masebule","Isongo"],
                "Bumala":["Bumala A","Bumala Central","Bumala Town"]},


    "Bujumba":{
        "Ikonzo":["Khulunyu A","Khulunyu B","Ikonzo A","Ikonzo B","Ikonzo C","Dadira A","Dadira B","Sirikhaya A","Sirikhaya B"],
                "Namwitsula":["Khuyala","Bukulumu ","Bukhula","Iyabo","Busibi","Namwitsula"],
                "Bujumba":["Nebolola","Kwikali","Bujumba","Bumina","Madola","Tingale","Buranga","Bukwaku A","Bukwaku B","Busire A","Busire B","Lwanya","Siroba","Kengo","Bukhuma","Sikota"],
                "Burinda":["Boro Kisumu","Burinda","Boro Nango","Nyahobe","Luminyi","Busibula","Nyamwanga A","Nyamwanga B","Buriya","Ogwaro"]},


    "Marachi Central":{
        "Kingadole":["Sigomere A","Sigomere B","Busaba","Simoni A","Simoni B","Simoni C","Sieywe","Muyeye A","Muyeye B","Musoma","Bumwaya A","Bumwaya B","Bumwaya C","Busakadi A","Busakadi B","Nyaluanda","Munongo","Kingadole A","Kingadole B","Sidukhumi","Shibale"],
                "Esikoma":["Bujwanga","Khuluchina","Bumanyi","Sikoma","Siamakond","Madwele","Masinde","Mundasi A","Mundasi B","Esieywe","Bidonge","Emagombe","Idudi","Elunyiko","Emukhuyu","Neela East","Neela West","Burumbutsi","Mabanza","Ibanda","Saka"],
                "Bukahalalire":["Igula West","Igula East","Butunyi","Murumba","Simuli","Mamba","Nyabula","Agola","Muguli","Bukahalire","Bumagunda","Randabu","Bufisi","Khusafu","Siguli","Enduru","Emamba","Munyenya","Busiada","Bumanyi"]},


    "ELugulu":{
        "Bulemia":["Enakaywa A","Enakaywa B","Enakaywa C","Enakaywa D","Busirangombe","Bukalama A","Bukalama B","Bukalama c","Bukalama D","Madola A","Madola B","Bulemia A","Bulemia B","Bulemia C"],
                "Namusala":["Bugengi","Mungambwa","Lisumu","Musoma","Bulindo","Namsala A","Namsala B","Bukhuma"],
                "Mukweso":["Esibembe","Elara A","Elara B","Mungabo","Elugulu","Namudoda","Igangu","Mabanga","Masiebi","Budama","Mukweso","Elwanda"],
                "Bulwani":["Imanga","Bumakhutu","Budunga","Bulwani A","Bulwani B","Bulwani C"],
                "Bwaliro":["Bwaliro A","Bwaliro B","Bwaliro C","Mukane","Sikura"]},

    "Elukhari":{
        "Kanjala":["Bukuyudi ","Kanjala A","Kanjala B","Siwololo"],
                "Sikarira":["Khurana A","Khurana B","Namasale","Namakholo","Idokho","Enandi","Mundaa","Nyalara","Makutano","Butula"],
                "Bukati":["Bukanga","Elwanya","Bukati","Khumukongolo","Nyapera","Ebuyumbu","Madowa","Emurale","Elukhari"]}


    }
    }
    };


        var key1,key2,key3,key4,key5,key6;
        var hold_sublocations =[],hold_locations = [];
        var hold_divisions =[];
        var hold_villages =[];
        var current_district;
        var selectedDistrict,selectedDivision,selectedLocation,selectedSubLocation;
        for (key1 in butulas) {
//            District;
            $("#Patient_address\\.county_district").append("<option value='"+key1+"'>"+key1+"</option>");
        }
        $("#Patient_address\\.county_district").change(function () {
            selectedDistrict = this.value;
            $("#Patient_address\\.township_division").empty();
            $("#Patient_address\\.township_division").append("<option value='...'>...</option>");
            $("#household_location_id").empty();
            $("#household_location_id").append("<option value='...'>...</option>");
            $("#Person_address\\.address2").empty();
            $("#Person_address\\.address2").append("<option value='...'>...</option>");
            $("#Person_address\\.city_village").empty();
            $("#Person_address\\.city_village").append("<option value='...'>...</option>");

            for (key2 in butulas[selectedDistrict]) {
//                Devision;
                if(!hold_divisions.indexOf(key2)> -1){
                    hold_divisions.push(key2);
                    $("#Patient_address\\.township_division").append("<option value='"+key2+"'>"+key2+"</option>");
                }
            }

        });

        $("#Patient_address\\.township_division").change(function () {
            selectedDivision = this.value;
//            location
           $("#household_location_id").empty();
            $("#household_location_id").append("<option value='...'>...</option>");
            $("#Person_address\\.address2").empty();
            $("#Person_address\\.address2").append("<option value='...'>...</option>");
            $("#Person_address\\.city_village").empty();
            $("#Person_address\\.city_village").append("<option value='...'>...</option>");


            for (key3 in butulas[selectedDistrict][selectedDivision]) {
//               location;
                if(!hold_locations.indexOf(key3)> -1){
                    hold_locations.push(key3);
                    $("#household_location_id").append("<option value='"+key3+"'>"+key3+"</option>");
                }
            }

        });

        $("#household_location_id").change(function () {
            selectedLocation = this.value;
            $("#Person_address\\.address2").empty();
            $("#Person_address\\.address2").append("<option value='...'>...</option>");
            $("#Person_address\\.city_village").empty();
            $("#Person_address\\.city_village").append("<option value='...'>...</option>");


            for (key4 in butulas[selectedDistrict][selectedDivision][selectedLocation]){
//               sub location;
                if(!hold_sublocations.indexOf(key4)> -1){
                    hold_sublocations.push(key4);
                    $("#Person_address\\.address2").append("<option value='"+key4+"'>"+key4+"</option>");
                }
            }

        });
        $("#Person_address\\.address2").change(function () {
            selectedSubLocation = this.value;
            $("#Person_address\\.city_village").empty();
            $("#Person_address\\.city_village").append("<option value='...'>...</option>");
            for (key5 in butulas[selectedDistrict][selectedDivision][selectedLocation][selectedSubLocation]) {
//               viallage
                if(!hold_sublocations.indexOf(key5)> -1){
                    hold_sublocations.push(key5);
                    $("#Person_address\\.city_village").append("<option value='"+butulas[selectedDistrict][selectedDivision][selectedLocation][selectedSubLocation][key5]+"'>"+butulas[selectedDistrict][selectedDivision][selectedLocation][selectedSubLocation][key5]+"</option>");
                }
            }

        });



        $('#allowed_in').change(function () {
            var $allowed_in = $('.allowed_in');
            if($("#allowed_in").val()=='A') {
                $allowed_in.show();
            }
           else{
                $allowed_in.hide();
            }
        });






    });


</script>
</html>